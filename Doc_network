OS : CentOS7
Première chose à faire sur une machine : 
-mise a jour.
sudo apt update

Deuxième chose configuré et installer le ssh : 

ssh name_pc@ip_adress
ssh du pc1 vers le pc2
ssh du pc2 vers le pc1

option -p pour changer de port: 
ssh nom_pc@ip_adress -p port
exemple (ssh nom_pc@192.168.2.100 -p 2300) 

si ça ne marche on peut faire ssh sur le pc1 puis ssh sur le pc2
(on seconnecte au router puis au server dhcp)

translation de port ssh: 
iptables -t nat -A PREROUTING -i eth0 -p tcp --dport 2300 -j DNAT --to 192.168.1.253:22

autoriser le port 22 ssh: 
iptables -I INPUT 2 -p tcp --dport 22 -j ACCEPT

sauveguarder les règles de iptables  :
service iptables save

afficher les règles :
iptables -nvL
iptables -t nat nvL


optionnelle : 
copie de la clés public vers le pc distant (plus besoin de mot de passe) : 
ssh-keygen
ssh-copy-id -i .ssh/id_rsa.pub root@samba
on à jsute à faire du coup : 
ssh root@samba


Troisièmement configuration de l'adresse ip statiquement :
Nous prennons l'exemple d'un dhcp ici ,mais ça aurai pu etre un pc

cd /etc/sysconfig/network-scripts
vi ifcfg-eth0

TYPE="Ethernet"
BOOTPROTO="static"
NAME="ens33"
ONBOOT="yes"
IPADDR=192.168.100.2
NETMAK=255.255.255.0
DNS1=8.8.8.8
DEVICE="ens33"
GATEWAY=192.168.100.254

Troisièmement configuration de l'adresse ip Dynamiquement:
Nous prennons l'exemple d'un dhcp ici ,mais ça aurai pu etre un pc

cd /etc/sysconfig/network-scripts
vi ifcfg-eth0

DEVICE=eth0
TYPE=Ethernet
ONBOOT=yes
NM_CONTROLLED=yes
BOOTPROTO=dhcp

Ici on met dynamiquement ou statiquement l'adresse ip du server dhcp.

Pour chaque réseau géré en plus de celui ou est situé l'ordinateur il faut ajouté une interface donc ens33 et ens37 si 2 réseau , ens33 et ens37 et ens40 si trois réseaux.


